name: Upload Build Output
description: Upload a github artifact containing all `dist` outputs
inputs:
  artifactName:
    description: Name of the artifact on which the outputs are published
    default: dist
    required: false

runs:
  using: 'composite'
  steps:
    - run: zip -q -r ${{ inputs.artifactName }}.zip . -i "apps/*/dist/*" "packages/*/dist/*" "tools/*/dist/*" -x "*/node_modules/*" ".cache/*"
      shell: bash
    - uses: actions/upload-artifact@b7c566a772e6b6bfb58ed0dc250532a479d7789f # v6.0.0
      with:
        name: ${{ inputs.artifactName }}
        path: ${{ inputs.artifactName }}.zip
    - run: rm -f ${{ inputs.artifactName }}.zip
      shell: bash
