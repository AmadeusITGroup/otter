# Major 14.0 Migration guide

> [!IMPORTANT]
> Please make sure to first follow the ["Upgrade new version guide"](https://github.com/AmadeusITGroup/otter/blob/main/docs/core/UPGRADE_NEW_VERSION.md) before going through these steps.

## Chrome DevTool relocation

The Otter Chrome DevTool has been relocated and can be downloaded from the [Chrome Web Store](https://chrome.google.com/webstore/detail/otter-devtools/cgbnjkegcpddliemjooeiomcdnacbdol).

## Removal of Protractor support

The Protractor dedicated helpers are now removed from the different packages.

## @ama-sdk/core

### Parameter serialization enabled by default

The `enableParameterSerialization` option is now set to `true` by default. This means that query parameters will be automatically serialized according to their schema definitions.

### Migration from `prepareUrl` to `prepareUrlWithQueryParams`

The `prepareUrl` method is **deprecated** and will be removed in v15. You must migrate to `prepareUrlWithQueryParams`.

**Before (v13 and earlier):**

```typescript
const url = this.prepareUrl('/api/endpoint', { param1: 'value1', param2: 'value2' });
```

**After (v14+):**

```typescript
const url = this.prepareUrlWithQueryParams('/api/endpoint', { param1: 'value1', param2: 'value2' });
```

**Key differences:**

- `prepareUrlWithQueryParams` properly handles parameter serialization based on OpenAPI schema definitions
- Array and object parameters are serialized according to the `style` and `explode` properties defined in your OpenAPI specification
- Date objects are automatically converted to ISO strings
- `undefined` values are filtered out from query parameters

**If you need to disable parameter serialization** (not recommended), you can set it explicitly:

```typescript
const apiClient = new ApiClient({
  enableParameterSerialization: false
});
```

# VsCode extension

Due to the migration to [Style Dictionary](https://styledictionary.com/) for Design Token support, the VsCode application won't provide auto completion on CSS for the CSS Variable based local Design Token file.

## @o3r/styling deprecation

The Deprecation of the package `@o3r/styling` has been reported to v15 due to non-notification of the Sass mixins.\
The Devkit modules exposed by `@o3r/styling` are now exposed by `@ama-styling/devkit`.

<!-- generated deprecated - start -->
## Deprecated this version

The following items are **deprecated** and **will be removed** in the version **15**:

### From [@ama-sdk/client-fetch](https://npmjs.com/package/@ama-sdk/client-fetch)

- `Mark` is deprecated.</br>Note: *use `CoreMark|Mark from [@ama-sdk/core](https://npmjs.com/package/@ama-sdk/core)` instead.*
- `PerformanceMetricOptions` is deprecated.</br>Note: *use `CorePerformanceMetricOptions|PerformanceMetricOptions from [@ama-sdk/core](https://npmjs.com/package/@ama-sdk/core)` instead.*

### From [@ama-sdk/core](https://npmjs.com/package/@ama-sdk/core)

- `prepareUrl` is deprecated.</br>Note: *use `prepareUrlWithQueryParams` with query parameter serialization*

### From [@o3r/dynamic-content](https://npmjs.com/package/@o3r/dynamic-content)

- `StyleLazyLoaderModule` is deprecated.
<!-- generated deprecated - end -->
